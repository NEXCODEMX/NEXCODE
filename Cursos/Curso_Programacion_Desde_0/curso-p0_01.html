<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NexCode - Curso De Programación desde 0 - Clase 1</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../cursos.css">
    <link rel="icon" href="../../Imagenes/LogoWeb.png" type="image/png">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="../../index.html" class="logo">NexCode</a>
            <ul class="nav-links">
                <li><a href="../../index.html">Inicio</a></li>
                <li><a href="../../index.html#cursos">Cursos</a></li>
                <li><a href="../../acercade.html">Acerca de</a></li>
                <li><a href="https://demian369369.github.io/JarvisFrontendProject/PaginasWeb/Prototipo9/RESUME-Source_code/index.html">Contacto</a></li>
            </ul>
        </div>
    </nav>

    <div class="main-content">
        <div class="video-container">
            <div class="video-details-section">
                <div class="video-player">
                    <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ?si=abcdefgh"
                            title="Video del Curso"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-in; gyroscope; picture-in-picture; web-share"
                            referrerpolicy="strict-origin-when-cross-origin"
                            allowfullscreen>
                    </iframe>
                </div>
                <div class="video-controls">
                    <a href="curso-p0_00.html" class="nav-button" id="prevBtn"> <i class="fas fa-chevron-left"></i>
                        Anterior
                    </a>
                    <div class="class-info">
                        <span class="class-number">Clase 1 de 20</span>
                        <span class="video-title">Introducción a la Programación</span>
                    </div>
                    <a href="curso-p0_02.html" class="nav-button" id="nextBtn">
                        Siguiente
                        <i class="fas fa-chevron-right"></i>
                    </a>
                </div>
                <div class="video-description-box">
                    <p class="video-description">
                       Bienvenido al curso de programación desde 0. En esta primera clase, exploraremos los conceptos fundamentales y la lógica detrás de la programación.
                       Aprenderás qué es la programación, por qué es importante y cómo empezar a pensar como un programador. ¡Prepárate para un emocionante viaje al mundo del código!
                    </p>
                </div>

                <div class="materials-section">
                    <button class="materials-button" onclick="toggleMaterials()">
                        <i class="fas fa-book"></i> Materiales Adicionales
                    </button>
                    <div class="materials-content" id="materialsContent">
                        <ul>
                            <li><a href="../pdfs_PD0/Clase01.pdf" target="_blank"><i class="fas fa-file-pdf"></i> Diapositivas de la Clase 1 (PDF)</a></li>
                            <li><a href="#" target="_blank"><i class="fas fa-code"></i> Código Fuente de Ejemplos</a></li>
                            <li><a href="#" target="_blank"><i class="fas fa-link"></i> Enlace a Recursos Externos</a></li>
                        </ul>
                    </div>
                </div>

                <div class="assessment-section">
                    <a href="curso-p0_Ejercicio01.html" class="exam-button" target="_blank">
                        <i class="fas fa-laptop-code"></i> Realizar Ejercicio Práctico
                    </a>
                    <button class="exam-button" onclick="openQuiz()">
                        <i class="fas fa-question-circle"></i> Tomar Quiz de la Clase
                    </button>
                </div>

            </div>

            <div class="sidebar-right">
                <div class="progress-section">
                    <div class="progress-title">
                        <i class="fas fa-chart-line"></i>
                        Progreso del Curso
                    </div>
                    <div class="progress-grid" id="progressGrid">
                        </div>
                </div>

                <div class="notes-section">
                    <div class="notes-title">
                        <i class="fas fa-sticky-note"></i>
                        Mis Notas
                    </div>
                    <textarea class="notes-input"
                              id="notesInput"
                              placeholder="Escribe tus notas y puntos importantes aquí..."></textarea>
                    <button class="save-notes-btn" onclick="saveNotes()">
                        <i class="fas fa-save"></i>
                        Guardar Notas
                    </button>
                    <div class="saved-notes" id="savedNotes">
                        <strong>✅ Notas guardadas exitosamente</strong>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-brand">NexCode</div>
            <img src="../../Imagenes/LogoWeb.png" alt="NexCode Logo" class="logo-img">
        </div>
        <div class="footer-text">
            © 2025 NexCode. Todos los derechos reservados.
        </div>
    </footer>

    <div class="quiz-overlay" id="quizOverlay">
        <div class="quiz-container">
            <div class="quiz-header">
                <h2>Quiz - Clase <span id="quizClassNumber">1</span></h2>
                <button class="close-quiz-btn" onclick="closeQuiz()">&times;</button>
            </div>
            <div class="quiz-body">
                <div class="quiz-question-counter" id="quizQuestionCounter"></div>
                <div class="question-area" id="questionArea">
                    <p id="questionText"></p>
                    <div class="drop-area" id="dropArea" ondragover="allowDrop(event)" ondrop="drop(event)" ondragleave="dragLeave(event)">
                        Arrastra la respuesta aquí
                    </div>
                </div>

                <div class="draggable-options" id="draggableOptions">
                    </div>

                <div class="hint-area" id="hintArea">
                    <p id="hintText"></p>
                </div>

                <div class="explanation-area" id="explanationArea">
                    <p id="explanationText"></p>
                    <button class="next-question-btn" id="nextQuestionBtn" onclick="nextQuestion()">Siguiente Pregunta</button>
                </div>

                <div class="celebration-animation" id="celebrationAnimation">
                    </div>
            </div>
        </div>
    </div>


    <script>
        const currentClass = 1;  // CAMBIAR MANUALMENTE PARA CADA CLASE (ej: 2, 3, etc.)
        const totalClasses = 20; // Asegúrate de que esto coincida con el número total de clases

        document.addEventListener('DOMContentLoaded', function() {
            initializeProgress();
            loadNotes();
            updateNavigationButtons();
            // Iniciar autosave al cargar
            setInterval(autoSaveNotes, 30000); // Autosave cada 30 segundos
        });

        // --- Progreso del Curso ---
        function initializeProgress() {
            const progressGrid = document.getElementById('progressGrid');
            progressGrid.innerHTML = '';
            for (let i = 1; i <= totalClasses; i++) {
                const circle = document.createElement('div');
                circle.className = 'progress-circle';
                
                if (i < currentClass) {
                    circle.classList.add('completed');
                    circle.innerHTML = '<i class="fas fa-check"></i>';
                } else if (i === currentClass) {
                    circle.classList.add('current');
                    circle.textContent = i;
                } else {
                    circle.classList.add('locked');
                    circle.innerHTML = '<i class="fas fa-lock"></i>';
                    circle.style.pointerEvents = 'none';
                }
                
                circle.title = `Clase ${i}`;

                if (i <= currentClass) {
                    circle.addEventListener('click', () => {
                        if (i !== currentClass) {
                            window.location.href = `curso-p0_${String(i).padStart(2, '0')}.html`;
                        }
                    });
                }

                progressGrid.appendChild(circle);
            }
        }

        // --- Notas con LocalStorage ---
        function saveNotes() {
            const notes = document.getElementById('notesInput').value;
            const key = `nexcode_notes_class_${currentClass}`;
            if (notes.trim()) {
                const notesData = {
                    content: notes,
                    timestamp: new Date().toISOString(),
                    className: `Clase ${currentClass}`
                };
                localStorage.setItem(key, JSON.stringify(notesData));
                const savedNotesDiv = document.getElementById('savedNotes');
                savedNotesDiv.classList.add('show');

                setTimeout(() => {
                    savedNotesDiv.classList.remove('show');
                }, 3000);
            } else {
                localStorage.removeItem(key);
            }
        }

        function loadNotes() {
            const key = `nexcode_notes_class_${currentClass}`;
            const savedData = localStorage.getItem(key);
            if (savedData) {
                const notesData = JSON.parse(savedData);
                document.getElementById('notesInput').value = notesData.content;
            }
        }

        function autoSaveNotes() {
            const notes = document.getElementById('notesInput').value;
            const key = `nexcode_notes_class_${currentClass}`;
            if (notes.trim()) {
                const notesData = {
                    content: notes,
                    timestamp: new Date().toISOString(),
                    className: `Clase ${currentClass}`
                };
                localStorage.setItem(key, JSON.stringify(notesData));
            } else {
                localStorage.removeItem(key);
            }
        }

        // --- Navegación de Clases ---
        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');

            if (currentClass <= 1) {
                prevBtn.style.opacity = '0.5';
                prevBtn.style.pointerEvents = 'none';
                prevBtn.href = "#";
            } else {
                prevBtn.style.opacity = '1';
                prevBtn.style.pointerEvents = 'auto';
                prevBtn.href = `curso-p0_${String(currentClass - 1).padStart(2, '0')}.html`;
            }

            if (currentClass >= totalClasses) {
                nextBtn.style.opacity = '0.5';
                nextBtn.style.pointerEvents = 'none';
                nextBtn.href = "#";
            } else {
                nextBtn.style.opacity = '1';
                nextBtn.style.pointerEvents = 'auto';
                nextBtn.href = `curso-p0_${String(currentClass + 1).padStart(2, '0')}.html`;
            }
        }

        // --- Materiales Adicionales (Toggle) ---
        function toggleMaterials() {
            const content = document.getElementById('materialsContent');
            content.style.display = content.style.display === 'block' ? 'none' : 'block';
        }

        // --- Evento de Logout (opcional) ---
        document.getElementById('logoutBtn')?.addEventListener('click', function(e) {
            e.preventDefault();
            localStorage.removeItem('techlearn_logged_in');
            localStorage.removeItem('techlearn_username');
            window.location.href = '../../index.html';
        });


        // ===============================================
        // --- QUIZ INTERACTIVO (ESTILO SCRATCH) ---
        // ===============================================

        let currentQuestionIndex = 0;
        let attempts = 0; // Para las pistas progresivas
        let quizQuestions = []; // Array para almacenar las preguntas de la clase actual

        // *** IMPORTANTE: Define tus preguntas del Quiz aquí para CADA CLASE ***
        const quizData = {
            1: [ // Preguntas para la Clase 1
                {
                    question: "¿Qué es una 'variable' en programación?",
                    options: ["Una función", "Un contenedor para datos", "Un tipo de error", "Una palabra clave"],
                    correctAnswer: "Un contenedor para datos",
                    hints: [
                        "Piensa en algo que puede guardar diferentes valores.",
                        "No es una acción, ni un problema. Sirve para almacenar información.",
                        "Es como una caja con un nombre donde puedes guardar números, texto, etc."
                    ],
                    explanation: "Una variable es un espacio de almacenamiento en la memoria de la computadora al que se le asigna un nombre y que puede contener un valor que puede cambiar durante la ejecución de un programa."
                },
                {
                    question: "¿Cuál de los siguientes NO es un tipo de dato básico?",
                    options: ["Número entero", "Texto (Cadena)", "Función", "Booleano (Verdadero/Falso)"],
                    correctAnswer: "Función",
                    hints: [
                        "Algunos tipos de datos representan valores, otros representan acciones o bloques de código.",
                        "No es algo que 'guardas' como un valor directo, sino algo que 'haces'.",
                        "Los tipos de datos son valores que pueden ser almacenados. Una función es una serie de instrucciones."
                    ],
                    explanation: "Mientras que un número entero, texto y booleano son tipos de datos que representan valores, una función es un bloque de código diseñado para realizar una tarea específica, no un tipo de dato en sí mismo."
                },
                {
                    question: "¿Qué es un algoritmo?",
                    options: ["Un lenguaje de programación", "Un conjunto de instrucciones para resolver un problema", "Un tipo de hardware", "Una interfaz de usuario"],
                    correctAnswer: "Un conjunto de instrucciones para resolver un problema",
                    hints: [
                        "Piensa en una receta de cocina, pero para una computadora.",
                        "Es una secuencia lógica y ordenada de pasos.",
                        "No es un programa completo, sino la base lógica de cómo se resuelve una tarea."
                    ],
                    explanation: "Un algoritmo es una secuencia finita de instrucciones o pasos bien definidos, ordenados y finitos que permiten resolver un problema, realizar un cómputo o procesar datos."
                },
                {
                    question: "¿Qué hace la sentencia 'if' en programación?",
                    options: ["Repite un bloque de código", "Define una función", "Ejecuta código solo si una condición es verdadera", "Imprime texto en pantalla"],
                    correctAnswer: "Ejecuta código solo si una condición es verdadera",
                    hints: [
                        "Es una estructura de control de flujo.",
                        "Sirve para tomar decisiones en tu código.",
                        "Si se cumple X, entonces haz Y."
                    ],
                    explanation: "La sentencia 'if' (si condicional) es una estructura de control que permite ejecutar un bloque de código determinado solo si se cumple una condición específica. Si la condición es falsa, el bloque de código dentro del 'if' se omite."
                },
                {
                    question: "¿Cuál es el propósito principal de un 'bucle' (loop)?",
                    options: ["Almacenar datos", "Realizar cálculos matemáticos", "Repetir un bloque de código varias veces", "Conectar diferentes partes de un programa"],
                    correctAnswer: "Repetir un bloque de código varias veces",
                    hints: [
                        "Imagina que necesitas hacer lo mismo muchas veces sin escribirlo una y otra vez.",
                        "Es útil para tareas que se repiten, como contar o procesar listas.",
                        "Es como un ciclo que se ejecuta hasta que se cumple una condición de salida."
                    ],
                    explanation: "Un bucle (o loop) es una estructura de control de flujo que permite repetir la ejecución de un bloque de código un número determinado de veces o mientras se cumpla una condición específica. Son fundamentales para automatizar tareas repetitivas."
                }
            ],
            // Puedes añadir más clases aquí:
            // 2: [ { question: "...", options: [...], correctAnswer: "...", hints: [...], explanation: "..." } ],
            // 3: [ ... ]
        };

        const quizOverlay = document.getElementById('quizOverlay');
        const quizContainer = quizOverlay.querySelector('.quiz-container');
        const quizClassNumberSpan = document.getElementById('quizClassNumber');
        const quizQuestionCounter = document.getElementById('quizQuestionCounter');
        const questionText = document.getElementById('questionText');
        const draggableOptions = document.getElementById('draggableOptions');
        const dropArea = document.getElementById('dropArea');
        const hintArea = document.getElementById('hintArea');
        const hintText = document.getElementById('hintText');
        const explanationArea = document.getElementById('explanationArea');
        const explanationText = document.getElementById('explanationText');
        const nextQuestionBtn = document.getElementById('nextQuestionBtn');
        const celebrationAnimation = document.getElementById('celebrationAnimation');

        function openQuiz() {
            quizClassNumberSpan.textContent = currentClass; // Actualiza el número de clase en el quiz
            quizQuestions = quizData[currentClass];

            if (!quizQuestions || quizQuestions.length === 0) {
                alert("¡Ups! No hay preguntas de quiz disponibles para esta clase aún.");
                return;
            }

            currentQuestionIndex = 0;
            quizOverlay.classList.add('show');
            quizContainer.classList.add('show');
            loadQuestion();
        }

        function closeQuiz() {
            quizOverlay.classList.remove('show');
            quizContainer.classList.remove('show');
            // Limpiar estado del quiz
            currentQuestionIndex = 0;
            attempts = 0;
            draggableOptions.innerHTML = '';
            dropArea.innerHTML = 'Arrastra la respuesta aquí';
            dropArea.classList.remove('correct', 'incorrect', 'highlight');
            hintArea.classList.remove('show');
            explanationArea.classList.remove('show');
            celebrationAnimation.classList.remove('show'); // Esconder animación de celebración
        }

        function loadQuestion() {
            if (currentQuestionIndex >= quizQuestions.length) {
                endQuiz();
                return;
            }

            const question = quizQuestions[currentQuestionIndex];
            attempts = 0; // Resetear intentos para la nueva pregunta

            // Resetear áreas
            dropArea.innerHTML = 'Arrastra la respuesta aquí';
            dropArea.classList.remove('correct', 'incorrect', 'highlight');
            hintArea.classList.remove('show');
            explanationArea.classList.remove('show');
            nextQuestionBtn.style.display = 'none';

            quizQuestionCounter.textContent = `Pregunta ${currentQuestionIndex + 1} de ${quizQuestions.length}`;
            questionText.textContent = question.question;

            // Barajar opciones y cargarlas
            draggableOptions.innerHTML = '';
            const shuffledOptions = shuffleArray([...question.options]); // Copia para no modificar el original
            shuffledOptions.forEach(option => {
                const item = document.createElement('div');
                item.className = 'draggable-item';
                item.textContent = option;
                item.draggable = true;
                item.ondragstart = dragStart;
                draggableOptions.appendChild(item);
            });
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Drag and Drop Functions
        function dragStart(event) {
            event.dataTransfer.setData('text/plain', event.target.textContent);
            event.target.classList.add('dragging');
        }

        function allowDrop(event) {
            event.preventDefault(); // Permite soltar
            dropArea.classList.add('highlight'); // Resaltar área al arrastrar sobre ella
        }

        function dragEnter(event) {
            // Esto puede ser útil si quieres efectos adicionales al entrar al área
        }

        function dragLeave(event) {
            dropArea.classList.remove('highlight'); // Remover resaltado al salir
        }

        function drop(event) {
            event.preventDefault();
            dropArea.classList.remove('highlight');
            
            const data = event.dataTransfer.getData('text/plain');
            const draggedItem = document.querySelector('.draggable-item.dragging');

            if (draggedItem) {
                dropArea.innerHTML = ''; // Limpia cualquier contenido anterior
                dropArea.appendChild(draggedItem);
                draggedItem.classList.remove('dragging');
                draggedItem.draggable = false; // Una vez soltado, no se puede arrastrar de nuevo hasta resetear
                
                checkAnswer(data);
            }
        }

        function checkAnswer(selectedAnswer) {
            const question = quizQuestions[currentQuestionIndex];
            attempts++;

            if (selectedAnswer === question.correctAnswer) {
                dropArea.classList.remove('incorrect');
                dropArea.classList.add('correct');
                explanationText.textContent = question.explanation;
                explanationArea.classList.add('show');
                nextQuestionBtn.style.display = 'block';
                hintArea.classList.remove('show'); // Ocultar pistas si se acierta
                
                // Deshabilitar todas las opciones restantes para que no se puedan arrastrar más
                document.querySelectorAll('.draggable-item').forEach(item => {
                    item.draggable = false;
                    item.style.pointerEvents = 'none'; // También deshabilitar clics si los hubiera
                });

            } else {
                dropArea.classList.remove('correct');
                dropArea.classList.add('incorrect');
                
                // Mostrar pista progresiva
                const hintIndex = Math.min(attempts - 1, question.hints.length - 1);
                hintText.textContent = question.hints[hintIndex];
                hintArea.classList.add('show');
                
                // Devolver el item arrastrado a las opciones originales para reintentar
                const draggedItem = dropArea.querySelector('.draggable-item');
                if (draggedItem) {
                    draggableOptions.appendChild(draggedItem);
                    draggedItem.draggable = true;
                    draggedItem.style.pointerEvents = 'auto';
                }
                dropArea.innerHTML = 'Arrastra la respuesta aquí'; // Restablecer el texto
            }
        }

        function nextQuestion() {
            currentQuestionIndex++;
            loadQuestion();
        }

        function endQuiz() {
            quizQuestionCounter.textContent = '';
            questionText.textContent = '¡Felicidades! Has completado el Quiz de la Clase.';
            draggableOptions.innerHTML = '';
            dropArea.innerHTML = '¡Excelente trabajo!';
            dropArea.classList.add('correct'); // Mantener verde al final
            hintArea.classList.remove('show');
            explanationArea.classList.remove('show');
            nextQuestionBtn.style.display = 'none';

            celebrationAnimation.classList.add('show'); // Mostrar animación de celebración

            setTimeout(() => {
                closeQuiz(); // Cerrar el quiz después de la celebración
            }, 5000); // 5 segundos para la animación
        }
    </script>
</body>
</html>